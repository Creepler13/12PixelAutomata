(()=>{var A={4:(A,e,t)=>{let a=t(274),r=[];function s(A){let e=document.createElement("img");return e.src=t(705)("./"+A),e}a.forEach((A=>{r.push(t(773)("./"+A+".json"))})),r.forEach((A=>{A.buildings&&A.buildings.forEach((A=>{if(A.texture=s(A.texture),A.upgrades)for(let e=0;e<A.upgrades.length;e++){let t=A.upgrades[e];t.texture?t.texture=s(t.texture):t.texture=0==e?A.texture:A.upgrades[0].texture}}))})),A.exports.DataManager=class{constructor(){}data={};load(){console.log(a),console.log(r)}getTexture(A,e,t){return this.data[A].data[e][t].texture}getSize(A){return this.data[A].size}getDir(A){return this.data[A].data}getEntrySize(A,e){return this.data[A].data[e].size}getKeys(A){var e=this.data[A].data,t=[];for(let A in e)t.push(A);return t}getData(A,e,t,a){return this.data[A].data[e][t].tile[a]}}},827:(A,e)=>{e.DataStorage=class{constructor(){this.data={},this.set=(A,e)=>{this.data[A]=e},this.get=A=>this.data[A],this.getKeys=()=>{var A=[];for(const e in this.data)A.push(e);return A}}}},987:(A,e,t)=>{const a=t(4);e.TileCreator=class extends a.DataManager{constructor(){super(),this.createTile=(A,e,t,a,r,s)=>{var i=new this.Data[t].data[a][s].tile.class(A,e,a,r);return i.level=s,i},this.idToName=(A,e)=>{for(let t in this.Data[A].data)for(let a=0;a<this.getEntrySize(A,t);a++)if(this.Data[A].data[t][a+1].id===e)return t},this.nameToId=(A,e,t)=>this.Data[A].data[e][t].id,this.typeNumberToName=(A,e)=>{var t=[];for(let e in this.Data[A].data)t.push(e);return t[e]}}}},105:(A,e,t)=>{var a=t(987),r=t(827);e.Map=class{constructor(){this.TileCreator=new a.TileCreator,this.Materials=new r.DataStorage,this.map=[],this.get=(A,e)=>this.map[A][e],this.facings={UP:0,RIGHT:1,DOWN:2,LEFT:3},this.init=()=>new Promise((A=>{this.TileCreator.load("data").then((()=>{this.TileCreator.getKeys("materials").forEach((A=>{this.Materials.set(A,0)})),A()}))})),this.set=(A,e,t,a,r,s)=>{void 0===this.map[A]&&(this.map[A]=[]),this.map[A][e]=this.TileCreator.createTile(A,e,t,a,r,s)},this.update=(A,e)=>{this.get(A,e).doUpdate(this)},this.createNewMaterial=(A,e,t)=>{var a=this.get(A,e),r=0;a.spaceType.forEach((A=>{A===t&&r++})),!a.hasSpace||!a.hasInput||a.space.length+1>a.maxSpace||this.materialCountInTile(A,e,t)>=r&&0!==a.spaceType.length?console.error("space Error"):this.map[A][e].space.push(t)},this.moveStorageTo=(A,e,t,a,r)=>{var s=this.get(A,e),i=this.get(t,a),g=this.map[A][e].space[r],n=0;i.spaceType.forEach((A=>{A===g&&n++})),!s.hasSpace||!i.hasSpace||!i.hasInput||i.space.length+1>i.maxSpace||0===s.space.length||r>=s.space.length||this.materialCountInTile(t,a,g)>=n&&0!==i.spaceType.length||(this.map[t][a].space.push(g),this.map[A][e].space.splice(r,1))},this.materialCountInTile=(A,e,t)=>{var a=this.get(A,e),r=0;return a.space.forEach((A=>{A===t&&r++})),r},this.facingTo=(A,e,t)=>{switch(t){case this.facings.UP:return{x:A,y:e-1};case this.facings.LEFT:return{x:A-1,y:e};case this.facings.RIGHT:return{x:A+1,y:e};case this.facings.DOWN:return{x:A,y:e+1}}},this.facingToAngle=A=>{switch(A){case this.facings.UP:return 90*Math.PI/180;case this.facings.DOWN:return-90*Math.PI/180;case this.facings.LEFT:return 0;case this.facings.RIGHT:return-180*Math.PI/180}},this.reverseFacing=A=>{switch(A){case this.facings.UP:return this.facings.DOWN;case this.facings.DOWN:return this.facings.UP;case this.facings.LEFT:return this.facings.RIGHT;case this.facings.RIGHT:return this.facings.LEFT}},this.levelUp=(A,e)=>{var t=this.get(A,e);this.set(A,e,"buildings",t.type,t.facing,t.level+1)},this.reset=()=>{this.map=[]},this.getXLength=()=>this.map.length,this.getYLength=A=>void 0===this.map[A]?0:this.map[A].length}}},773:(A,e,t)=>{var a={"./mainGame.json":961,"./modules.json":274};function r(A){var e=s(A);return t(e)}function s(A){if(!t.o(a,A)){var e=new Error("Cannot find module '"+A+"'");throw e.code="MODULE_NOT_FOUND",e}return a[A]}r.keys=function(){return Object.keys(a)},r.resolve=s,A.exports=r,r.id=773},705:(A,e,t)=>{var a={"./base.png":350,"./delete.png":5,"./empty.png":796,"./energy.png":84,"./factory.png":376,"./faster mover.png":361,"./mover.png":91,"./mover2.png":126,"./splitter.png":743,"./splitter2.png":733,"./upgrade.png":21,"./water-collector.png":631,"./water.png":645};function r(A){var e=s(A);return t(e)}function s(A){if(!t.o(a,A)){var e=new Error("Cannot find module '"+A+"'");throw e.code="MODULE_NOT_FOUND",e}return a[A]}r.keys=function(){return Object.keys(a)},r.resolve=s,A.exports=r,r.id=705},350:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACeSURBVChTjVCxDQMhDAS+YgeEsgUdFQUzpGITFqOj8hKMkYIqRyxZTpr8CZnzceb4t7XWlJIxppQyxgBhSEtEDg5saCDh4GP4csBge+/S8DGqdoDYOadIqBoy5nTK8/GSxQrnOjDt02AHyDH9xTHJxA8k4dbDrxgjGH9tCKG1lnPee4NDRF1rnTj5H5wrKRD5+st7rx0gAKbRop77iN5Lym9AVG9hgQAAAABJRU5ErkJggg=="},5:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAACUSURBVChTdZLBCsIwEESHXi20d69SvBbxIHgV/P+fsPd+wLjTbcoaNwsDm+S9kISA5558P8l1pRXSaE2MseD9So4235IKLMZYcPlsTSpVsFhfyKQEFutCLb0engr+FYp0mxxU1AdY6RDr1APDuA+s1Gsu1mHHM88Xj/rqIf7hcuZ4pyDl8L5bJqEJNyT/Gi245JDAL1qket1WuR+9AAAAAElFTkSuQmCC"},796:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAaSURBVChTY/z//z8DIcAEpfGCUUX0VcTAAAA/qQMVLcbTmwAAAABJRU5ErkJggg=="},84:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAABsSURBVChTY2RAAvYeZ/6D6IM7TBj////PBGKDFQA5jMqbfP+B2DBw128zWAETSCUjIyNYJzYAN4rhM+NfMA0DvBBxEAHSDTbBIewMGMMAyGSIbjwAZAXEJ58ZURwJswLuCxCNDEDG////nxEAoR4qyOtsuLYAAAAASUVORK5CYII="},376:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABvSURBVChTjZGxDcAgDATZLG0aZvJwtJmGBciZlwxKiMILjPEfFoJkZjnn1kUySxUAh4IjHuel4VQn0IBmraFSCqVWE4MkmslyiIX4gIhIVtKyhMLag5javCEka/viyE9Nik5yB/TzmGz8U76+xewG+tbN4aASnqwAAAAASUVORK5CYII="},361:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURX9/f//3hwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEtEdfIAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAcSURBVBjTY2BgYGQQYARSQEIAHwdGQQVxcgUYATJbATPjZfFFAAAAAElFTkSuQmCC"},91:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABeSURBVChTfY7LEcAgCERj0gfV0BeNcaOP1OKqzPgZ5J128IFbRORZYGZVPcLbn5zQQJjSzUBwKTFAk3IDFDPLDbAVv/EREVb/zhFcGZdwHNMwDPy73JudEm8rHnvMFSoGap52VZDyAAAAAElFTkSuQmCC"},126:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURX9/f//3hwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEtEdfIAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAcSURBVBjTY2BgYGQQYARSQEIAHwdGQQVxcgUYATJbATPjZfFFAAAAAElFTkSuQmCC"},743:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURX9/f7y8vM/PzwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKRmbHAAAAAJcEhZcwAADsEAAA7BAbiRa+0AAAAwSURBVBjTY2BgYmBQYAACBSYQycAE5ggwMDCCkAAQgQgwA0JBBaFKYBqg2oGEAgMAPWUBdxQorJsAAAAASUVORK5CYII="},733:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURX9/f/z/VP/3hwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABCVFKkAAAAJcEhZcwAADsAAAA7AAWrWiQkAAAAwSURBVBjTY2BgYmBQYAACBSYQycAE5ggwMDCCkAAQgQgwA0JBBaFKYBqg2oGEAgMAPWUBdxQorJsAAAAASUVORK5CYII="},21:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURSb/Jkj/SFn/Wcj/yMv/y+P/4+r/6vT/9P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAGBybnUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAAA5SURBVBjTY+joSBTr6GDoaBNgzABSiQwMYh0MbQIMDIwZDEUMQCDGoACiGBlCHRgYmIFKAvBTzB0A0/cP5SqiblEAAAAASUVORK5CYII="},631:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURUhISH9/fz9IzJnZ6sPDwwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvUdjcAAAAJcEhZcwAADsIAAA7CARUoSoAAAAA3SURBVBjTY2BgNmZgACIGYwNmAwZBBjAQdFBSUmBgEBEAUgYMjiDKGEZBBaFKoBqg2kGGMRgDABwyBsuyVuZsAAAAAElFTkSuQmCC"},645:A=>{"use strict";A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAAAXSURBVBhXY2RQ+8+ADTBBaQwwGCUYGADopwE1bm8hjgAAAABJRU5ErkJggg=="},961:A=>{"use strict";A.exports=JSON.parse('{"buildings":[{"name":"mover","texture":"mover.png","cost":{"energy":2},"updateTicks":20,"storage":1,"upgrades":[{"cost":{"energy":7},"mod":{"updateTicks":10},"texture":"mover2.png"}]},{"name":"water-collector","texture":"water-collector.png","cost":{"energiy":20},"updateTicks":40,"action":{"make":{"product":{"water":1}},"move":{"dir":{"water":1}}}}],"materials":[{"name":"energy","texture":"energy.png"},{"name":"water","texture":"water.png"},{"name":"steam","texture":"steam.png"}]}')},274:A=>{"use strict";A.exports=["mainGame"]}},e={};function t(a){var r=e[a];if(void 0!==r)return r.exports;var s=e[a]={exports:{}};return A[a](s,s.exports,t),s.exports}t.o=(A,e)=>Object.prototype.hasOwnProperty.call(A,e),(()=>{var A=document.getElementById("canvas").getContext("2d"),e=document.getElementById("selectetDisplay"),a=document.getElementById("baseDisplay"),r=new(t(105).Map);r.init().then((()=>{!function(){console.log("game Started"),s=0,i=0,g=0,c=0,n=0;for(const A in r.TileCreator.Data.buildings.data)void 0===r.TileCreator.getData("buildings",A,1,"canBuild")&&n++;e.textContent="Selectet building: "+r.TileCreator.getData("buildings",p(),1,"name"),r.reset();for(let A=0;A<l;A++)for(let e=0;e<l;e++)r.set(e,A,"buildings","empty",0,1);r.set(10,10,"buildings","base",0,1),r.Materials.set("water",20),setInterval(h,50)}()}));var s,i,g,n,c,l=50,o=0,u={0:"build",1:"upgrade",2:"delete"};function h(){for(let t=0;t<r.getXLength();t++)for(let a=0;a<r.getYLength(0);a++){var e=r.get(t,a);if(r.update(t,a),A.translate(12*t+6,12*a+6),A.rotate(r.facingToAngle(e.facing)),A.drawImage(r.TileCreator.getTexture("buildings",e.type,e.level),-6,-6,12,12),A.rotate(-r.facingToAngle(e.facing)),A.translate(-(12*t+6),-(12*a+6)),0!=e.space.length)switch(e.space.length){case 1:A.drawImage(r.TileCreator.getTexture("materials",e.space[0],1),12*t+2,12*a+2,8,8);break;case 2:A.drawImage(r.TileCreator.getTexture("materials",e.space[0],1),12*t+2,12*a+6,8,4),A.drawImage(r.TileCreator.getTexture("materials",e.space[1],1),12*t+2,12*a+6,8,4)}}!function(){if(A.globalAlpha=.6,A.translate(12*s+6,12*i+6),0===c){A.rotate(r.facingToAngle(o));var e=r.TileCreator.getTexture("buildings",p(),1);A.drawImage(e,-6,-6,12,12),A.rotate(-r.facingToAngle(o))}else e=r.TileCreator.getTexture("ui",u[c],1),A.drawImage(e,-6,-6,12,12);A.translate(-(12*s+6),-(12*i+6)),A.globalAlpha=1,A.font="12px arial",A.fillStyle="#FFFFFF",A.fillRect(0,600,600,800);var t=r.Materials.getKeys(),g="";for(let e=0;e<t.length;e++)A.fillStyle="#000000",A.drawImage(r.TileCreator.getTexture("materials",t[e],1),50,600+12*(e+1),8,8),A.fillText(": "+r.Materials.get(t[e]),62,600+12*(e+1)+8),g=g+t[e]+":"+r.Materials.get(t[e])+"\n";a.textContent=g,A.fillText("Selected Building :",190,624);for(let e=1;e<r.TileCreator.getEntrySize("buildings",p())+1;e++)A.drawImage(r.TileCreator.getTexture("buildings",p(),e),300,600+13*e,12,12),r.TileCreator.getData("buildings",p(),e,"price")>r.Materials.get("water")&&(A.fillStyle="#ff0000"),A.fillText(r.TileCreator.getData("buildings",p(),e,"price"),315,600+12*e+12)}()}function p(){return r.TileCreator.typeNumberToName("buildings",g)}document.onkeyup=function(A){switch(A.keyCode){case 87:i>0&&i--;break;case 65:s>0&&s--;break;case 83:i<49&&i++;break;case 68:s<49&&s++;break;case 32:switch(c){case 0:if(r.TileCreator.getData("buildings",p(),1,"price")>r.Materials.get("water")&&p()==r.TileCreator.getData("buildings",r.get(s,i).type))break;r.Materials.set("water",r.Materials.get("water")-r.TileCreator.getData("buildings",p(),1,"price")+r.TileCreator.getData("buildings",r.get(s,i).type,r.get(s,i).level,"price")/2),r.set(s,i,"buildings",p(),o,1);break;case 1:if(console.log(r.TileCreator.getEntrySize("buildings",r.get(s,i).type)),r.TileCreator.getEntrySize("buildings",r.get(s,i).type)<=r.get(s,i).level)break;if(r.TileCreator.getData("buildings",r.get(s,i).type,r.get(s,i).level+1,"price")>r.Materials.get("water"))break;return r.Materials.set("water",r.Materials.get("water")-r.TileCreator.getData("buildings",p(),r.get(s,i).level+1,"price")+r.TileCreator.getData("buildings",p(),r.get(s,i).level,"price")/2),void r.levelUp(s,i);case 2:return r.Materials.set("water",r.Materials.get("water")+r.TileCreator.getData("buildings",p(),r.get(s,i).level,"price")/2),void r.set(s,i,"buildings","empty",0,1)}break;case 81:g==n?g=0:g++,!1===r.TileCreator.getData("buildings",p(),1,"canBuild")&&(g==n?g=0:g++),e.textContent="Selectet building: "+r.TileCreator.getData("buildings",p(),1,"name");break;case 82:3==o?o=0:o++;break;case 69:0==g?g=n:g--,!1===r.TileCreator.getData("buildings",p(),1,"canBuild")&&(0==g?g=n:g--),e.textContent="Selectet building: "+r.TileCreator.getData("buildings",p(),1,"name");break;case 84:2==c?c=0:c++}}})()})();